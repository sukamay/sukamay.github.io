<hr>
<p>title: DjangoInUbutun_0</p>
<h2 id="categories-Django"><a href="#categories-Django" class="headerlink" title="categories: Django"></a>categories: Django</h2><h1 id="Django-in-Ubuntu-part0"><a href="#Django-in-Ubuntu-part0" class="headerlink" title="Django in Ubuntu part0"></a>Django in Ubuntu part0</h1><h2 id="1-安装"><a href="#1-安装" class="headerlink" title="1. 安装"></a>1. 安装</h2><pre><code class="shell">root@iZwz969jm0y04abuhgx4byZ:~# apt-get install python-setuptools
root@iZwz969jm0y04abuhgx4byZ:~# python -m pip install "django&lt;2"
root@iZwz969jm0y04abuhgx4byZ:~# python
Python 2.7.12 (default, Nov 12 2018, 14:36:49) 
[GCC 5.4.0 20160609] on linux2
Type "help", "copyright", "credits" or "license" for more information.
<span class="meta">&gt;</span>&gt;&gt; import django
<span class="meta">&gt;</span>&gt;&gt; django.VERSION
(1, 11, 17, u'final', 0)
<span class="meta">&gt;</span>&gt;&gt; 
</code></pre>
<p>如果python版本为3.5以上，可以使用 <code>easy_install django</code>安装。</p>
<h2 id="2-创建新项目"><a href="#2-创建新项目" class="headerlink" title="2. 创建新项目"></a>2. 创建新项目</h2><p> 使用pip 安装的话，用</p>
<pre><code class="shell">root@iZwz969jm0y04abuhgx4byZ:~# django-admin.py
Note that only Django core commands are listed as settings are not properly configured (error: Requested setting INSTALLED_APPS, but settings are not configured. You must either define the environment variable DJANGO_SETTINGS_MODULE or call settings.configure() before accessing settings.).
root@iZwz969jm0y04abuhgx4byZ:~# django-admin startproject HelloWorld
root@iZwz969jm0y04abuhgx4byZ:~# cd HelloWorld/
root@iZwz969jm0y04abuhgx4byZ:~/HelloWorld# tree
.
├── HelloWorld
│   ├── __init__.py
│   ├── settings.py
│   ├── urls.py
│   └── wsgi.py
└── manage.py

1 directory, 5 files
</code></pre>
<p><strong>Error</strong>：Requested setting INSTALLED_APPS, but settings are not configured. You must either define the environment variable DJANGO_SETTINGS_MODULE or call settings.configure() before accessing settings</p>
<p><strong>Solve:</strong> django-admin 不要py</p>
<p><strong>Error:</strong>  DisallowedHost at / Invalid HTTP_HOST header</p>
<p><strong>Solve:</strong>  将项目名称下的  <code>settings.py</code> 中的 <code>ALLOWED_HOSTS = []</code> 改成  <code>ALLOWED_HOSTS = [&#39;*&#39;]</code></p>
<h2 id="3-视图和URL配置"><a href="#3-视图和URL配置" class="headerlink" title="3. 视图和URL配置"></a>3. 视图和URL配置</h2><h3 id="3-1-视图"><a href="#3-1-视图" class="headerlink" title="3.1 视图"></a>3.1 视图</h3><p>在先前创建的 HelloWorld 目录下的 HelloWorld 目录新建一个 view.py 文件，并输入代码：</p>
<pre><code class="python"><span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponse

<span class="function"><span class="keyword">def</span> <span class="title">hello</span><span class="params">(request)</span>:</span>
    <span class="keyword">return</span> HttpResponse(<span class="string">"Hello world ! "</span>)
</code></pre>
<h3 id="3-2-URL配置"><a href="#3-2-URL配置" class="headerlink" title="3.2 URL配置"></a>3.2 URL配置</h3><p>接着，绑定 URL 与视图函数。打开 urls.py 文件，删除原来代码，将以下代码复制粘贴到 urls.py 文件中：</p>
<pre><code class="python"><span class="keyword">from</span> django.conf.urls <span class="keyword">import</span> url

<span class="keyword">from</span> . <span class="keyword">import</span> view

urlpatterns = [
    url(<span class="string">r'^$'</span>, view.hello),
]
</code></pre>
<h3 id="3-3-编译"><a href="#3-3-编译" class="headerlink" title="#3.3 编译"></a>#3.3 编译</h3><p>不需要，服务器会自动在更改后编译</p>
<p>随后编译 <code>view.py</code>  和  <code>urls.py</code>文件</p>
<pre><code>root@iZwz969jm0y04abuhgx4byZ:~/HelloWorld/HelloWorld# python -m py_compile urls.py
</code></pre><h3 id="3-4-打开服务器"><a href="#3-4-打开服务器" class="headerlink" title="3.4 打开服务器"></a>3.4 打开服务器</h3><p>注：如果是 Django &gt;= 2.0 的版本，<code>urls.py</code> 的 <code>django.conf.urls</code> 已经被 <code>django.urls</code> 取代。</p>
<p>django.urls 的用法参考如下：</p>
<pre><code class="python"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path
<span class="keyword">from</span> . <span class="keyword">import</span> view

urlpatterns = [
    path(<span class="string">''</span>, view.hello),
    path(<span class="string">'world/'</span>, view.world)
]
</code></pre>
<p>其中最大的几个改变如下：</p>
<p><strong>import url</strong> 变成了 <strong>import path</strong></p>
<p>如果是路径，则须在路径后加个/</p>
<p>旧版 django 的用法：</p>
<pre><code class="python"><span class="keyword">from</span> django.conf.urls <span class="keyword">import</span> url
<span class="keyword">from</span> . <span class="keyword">import</span> view

urlpatterns = [
    url(<span class="string">r'^hello$'</span>, view.hello),
]
</code></pre>
<p>新版的参考写法：</p>
<pre><code class="python"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path
<span class="keyword">from</span> . <span class="keyword">import</span> view

urlpatterns = [
    path(<span class="string">'hello/'</span>, view.hello),
]
</code></pre>
